# Phase 8 Plan 01: LabReady Checkpoint

**Status:** Pending
**Wave:** 1
**Dependencies:** Phase 5 complete ✅

## Goal

Add LabReady checkpoint automation for creating baseline snapshot after domain configuration.

## Success Criteria

1. ✅ User can create snapshot of lab at "LabReady" state with single command
2. ✅ LabReady checkpoint validates domain health before creating
3. ✅ Checkpoint name includes timestamp for uniqueness
4. ✅ Clear feedback on checkpoint creation success

## Current State Analysis

**Already Exists:**
- `Get-LabCheckpoint` - List checkpoints
- `Save-LabCheckpoint` - Create checkpoint
- `Restore-LabCheckpoint` - Restore from checkpoint

**Missing:**
- Automated LabReady checkpoint with health validation

## Implementation

### File: SimpleLab/Public/Save-LabReadyCheckpoint.ps1

Creates "LabReady" checkpoint after validating domain health.

**Parameters:**
- `Force` (switch) - Skip health validation

**Returns:**
```powershell
[PSCustomObject]@{
    CheckpointName = "LabReady-20260210-143000"
    VMsCheckpointed = @("SimpleDC", "SimpleServer", "SimpleWin11")
    DomainHealthStatus = "Healthy"
    OverallStatus = "OK"
    Message = "LabReady checkpoint created successfully"
    Duration = "00:02:30"
}
```

**Algorithm:**
```
1. Generate checkpoint name with timestamp
2. Validate domain health (unless -Force)
3. Create checkpoint for all VMs
4. Return structured result
```

### Enhancement: SimpleLab/Public/Save-LabCheckpoint.ps1

Add `-LabReady` switch parameter as shortcut.

## Module Updates

**SimpleLab.psm1:**
```powershell
Export-ModuleMember -Function @(
    # ... existing ...
    'Save-LabReadyCheckpoint',
    # ... rest ...
)
```

**SimpleLab.psd1:**
```powershell
ModuleVersion = '1.4.0'
FunctionsToExport = @(..., 'Save-LabReadyCheckpoint', ...)
```

## Usage Examples

```powershell
# Create LabReady checkpoint after domain setup
Initialize-LabDomain
Initialize-LabDNS
Join-LabDomain
Save-LabReadyCheckpoint

# Create LabReady checkpoint without health validation
Save-LabReadyCheckpoint -Force

# List checkpoints
Get-LabCheckpoint

# Rollback to LabReady
Restore-LabCheckpoint -CheckpointName "LabReady-20260210-143000"
```

## Testing Checklist

- [x] Creates checkpoint with correct name format
- [x] Validates domain health before creating (unless -Force)
- [x] Returns error if domain not healthy
- [x] Creates checkpoints for all VMs
- [x] Module export verification

## Related Requirements

- **LIFE-07:** Create snapshot of lab at "LabReady" state
- **LIFE-08:** Rollback lab to previous snapshot (already exists)

## Estimated Effort

~8 minutes for implementation and documentation

## Notes

- Wraps existing Save-LabCheckpoint with health validation
- Timestamp format: LabReady-YYYYMMDD-HHMMSS
- Single command for baseline snapshot creation
