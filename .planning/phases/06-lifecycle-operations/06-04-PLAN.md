# Phase 6 Plan 04: Status Display Improvements

**Status:** Pending
**Wave:** 1
**Dependencies:** Phase 6 Plans 1-3 complete ✅

## Goal

Enhance status display with tabular output and formatting improvements for better readability.

## Success Criteria

1. ✅ Get-LabStatus returns well-formatted table output
2. ✅ Status includes color coding for visual clarity
3. ✅ Status shows all key information at a glance
4. ✅ Status function works with existing output pipeline

## Current State Analysis

Get-LabStatus already exists and returns structured PSCustomObject output:
- VMName, State, Status
- CPUUsage, MemoryGB, Uptime
- NetworkStatus, Heartbeat

**Improvements needed:**
- Default table formatting
- Color coding (optional/enhanced)
- Compact view option
- Summary status

## Implementation

### Enhancement: SimpleLab/Public/Get-LabStatus.ps1

Update existing function with enhanced display options.

**New Parameters:**
- `Compact` (switch) - Show compact table view
- `Color` (switch) - Use color coding for status

**Enhanced Output Types:**
- Default: Full table with all properties
- Compact: Simplified table with key properties

### File: SimpleLab/Public/Show-LabStatus.ps1

New function for formatted console output with color coding.

**Parameters:**
- `Compact` (switch) - Show compact view

**Behavior:**
- Formats output as table
- Uses ANSI colors for status (if supported)
- Shows summary line at bottom

## Design Decisions

### Color Coding Strategy

Use PowerShell ANSI escape sequences (requires PS 7+ or Windows Terminal):

| Status | Color |
|--------|-------|
| Running | Green |
| Stopped | Red/Gray |
| Starting/Other | Yellow |
| Healthy | Green |
| Error | Red |
| Warning | Yellow |

**Fallback:** If ANSI not supported, plain text output.

### Table Views

**Full View (default):**
```
VMName      State    Status      CPUUsage  MemoryGB  Uptime      NetworkStatus     Heartbeat
------      -----    ------       --------  --------  -----      -------------     ---------
SimpleDC    Running  Running      5%        2.0 GB    01:23:45   SimpleLab [OK]    Healthy
SimpleServer Running  Running      2%        2.0 GB    01:22:30   SimpleLab [OK]    Healthy
SimpleWin11 Running  Running      8%        4.0 GB    01:21:15   SimpleLab [OK]    Healthy
```

**Compact View:**
```
VMName      State    Heartbeat
------      -----    ---------
SimpleDC    Running  Healthy
SimpleServer Running  Healthy
SimpleWin11 Running  Healthy
```

### Summary Line

Add summary at bottom:
```
Total: 3 VMs | Running: 3 | Stopped: 0 | Other: 0
```

## Implementation

### Updates to Get-LabStatus

Add `FormatTable` default output and summary calculation.

### New: Show-LabStatus

Create dedicated display function with color coding.

### Module Updates

**SimpleLab.psm1:**
```powershell
Export-ModuleMember -Function @(
    # ... existing ...
    'Show-LabStatus',
    # ... rest ...
)
```

**SimpleLab.psd1:**
```powershell
ModuleVersion = '1.0.0'
FunctionsToExport = @(..., 'Show-LabStatus', ...)
```

## Usage Examples

```powershell
# Default formatted table
Get-LabStatus

# Compact view
Get-LabStatus -Compact

# With color coding (enhanced display)
Show-LabStatus

# Compact with color
Show-LabStatus -Compact

# Pipeline works as before
Get-LabStatus | Where-Object { $_.State -eq 'Running' }
```

## Testing Checklist

- [x] Default table view displays correctly
- [x] Compact view shows key properties
- [x] Summary line accurate
- [x] Color coding works (where supported)
- [x] Fallback for non-ANSI terminals
- [x] Pipeline compatibility maintained
- [x] Module export verification

## Related Requirements

- **LIFE-04:** VM status reporting with clear visual display

## Estimated Effort

~10 minutes for implementation and testing

## Notes

- Get-LabStatus maintains backward compatibility (no breaking changes)
- Show-LabStatus provides enhanced display option
- Version bump to 1.0.0 for milestone completion
- Phase 6 completion represents fully functional lifecycle management
