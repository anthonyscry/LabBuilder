<ScrollViewer xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
              xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
              VerticalScrollBarVisibility="Auto"
              HorizontalScrollBarVisibility="Disabled">

    <StackPanel MaxWidth="700" Margin="0,0,0,24">

        <!-- Header -->
        <TextBlock Text="Customize VM Templates"
                   Style="{DynamicResource HeaderLabel}"
                   Margin="0,0,0,16" />

        <!-- TEMPLATE SELECTION section -->
        <TextBlock Text="TEMPLATE"
                   Foreground="{DynamicResource AccentBrush}"
                   FontSize="12"
                   FontWeight="Bold"
                   Margin="0,0,0,8" />

        <Border Style="{DynamicResource CardBorder}" Margin="0,0,0,16">
            <StackPanel>
                <!-- Template ComboBox + buttons -->
                <Grid Margin="0,0,0,8">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <ComboBox x:Name="cmbTemplate"
                              Grid.Column="0"
                              Style="{DynamicResource ModernComboBox}"
                              Margin="0,0,8,0" />
                    <Button x:Name="btnNewTemplate"
                            Grid.Column="1"
                            Content="New"
                            Style="{DynamicResource ModernButton}"
                            Padding="12,6"
                            Margin="0,0,8,0" />
                    <Button x:Name="btnDeleteTemplate"
                            Grid.Column="2"
                            Content="Delete"
                            Style="{DynamicResource ModernButton}"
                            Padding="12,6" />
                </Grid>

                <!-- Template description -->
                <TextBlock x:Name="txtTemplateDescription"
                           Foreground="{DynamicResource TextSecondaryBrush}"
                           FontSize="12"
                           TextWrapping="Wrap"
                           Margin="0,0,0,8" />

                <!-- New template name input (hidden by default) -->
                <StackPanel x:Name="pnlNewTemplate" Visibility="Collapsed">
                    <TextBlock Text="New Template Name"
                               Foreground="{DynamicResource TextSecondaryBrush}"
                               FontSize="12"
                               Margin="0,0,0,4" />
                    <Grid Margin="0,0,0,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <TextBox x:Name="txtNewTemplateName"
                                 Grid.Column="0"
                                 Style="{DynamicResource ModernTextBox}"
                                 Margin="0,0,8,0" />
                        <Button x:Name="btnCreateTemplate"
                                Grid.Column="1"
                                Content="Create"
                                Style="{DynamicResource ModernButton}"
                                Padding="12,6"
                                Margin="0,0,8,0" />
                        <Button x:Name="btnCancelNew"
                                Grid.Column="2"
                                Content="Cancel"
                                Style="{DynamicResource ModernButton}"
                                Padding="12,6" />
                    </Grid>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- VM DEFINITIONS section -->
        <TextBlock Text="VM DEFINITIONS"
                   Foreground="{DynamicResource AccentBrush}"
                   FontSize="12"
                   FontWeight="Bold"
                   Margin="0,0,0,8" />

        <!-- Column headers -->
        <Grid Margin="0,0,0,4">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="120" />
                <ColumnDefinition Width="100" />
                <ColumnDefinition Width="120" />
                <ColumnDefinition Width="70" />
                <ColumnDefinition Width="70" />
                <ColumnDefinition Width="50" />
            </Grid.ColumnDefinitions>
            <TextBlock Grid.Column="0" Text="Name"
                       Foreground="{DynamicResource TextSecondaryBrush}"
                       FontSize="11" Margin="0,0,8,0" />
            <TextBlock Grid.Column="1" Text="Role"
                       Foreground="{DynamicResource TextSecondaryBrush}"
                       FontSize="11" Margin="0,0,8,0" />
            <TextBlock Grid.Column="2" Text="IP Address"
                       Foreground="{DynamicResource TextSecondaryBrush}"
                       FontSize="11" Margin="0,0,8,0" />
            <TextBlock Grid.Column="3" Text="Mem (GB)"
                       Foreground="{DynamicResource TextSecondaryBrush}"
                       FontSize="11" Margin="0,0,8,0" />
            <TextBlock Grid.Column="4" Text="CPUs"
                       Foreground="{DynamicResource TextSecondaryBrush}"
                       FontSize="11" Margin="0,0,8,0" />
        </Grid>

        <!-- VM rows container (populated dynamically) -->
        <StackPanel x:Name="vmEditorContainer" Margin="0,0,0,8" />

        <!-- Add VM button -->
        <Button x:Name="btnAddVM"
                Content="+ Add VM"
                Style="{DynamicResource ModernButton}"
                Padding="12,6"
                HorizontalAlignment="Left"
                Margin="0,0,0,16" />

        <!-- TEMPLATE DESCRIPTION section -->
        <TextBlock Text="DESCRIPTION"
                   Foreground="{DynamicResource AccentBrush}"
                   FontSize="12"
                   FontWeight="Bold"
                   Margin="0,0,0,8" />

        <Border Style="{DynamicResource CardBorder}" Margin="0,0,0,16">
            <TextBox x:Name="txtEditDescription"
                     Style="{DynamicResource ModernTextBox}"
                     AcceptsReturn="True"
                     TextWrapping="Wrap"
                     MinHeight="50" />
        </Border>

        <!-- Action buttons -->
        <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
            <Button x:Name="btnSaveTemplate"
                    Content="Save Template"
                    Style="{DynamicResource ModernButton}"
                    Width="140"
                    Height="40"
                    FontSize="15"
                    Margin="0,0,12,0" />
            <Button x:Name="btnApplyTemplate"
                    Content="Apply to Lab"
                    Style="{DynamicResource ModernButton}"
                    Width="140"
                    Height="40"
                    FontSize="15" />
        </StackPanel>

    </StackPanel>
</ScrollViewer>
